project(open62541-interface)
cmake_minimum_required(VERSION 3.19)

SET(${PROJECT_NAME}_MAJOR_VERSION 00)
SET(${PROJECT_NAME}_MINOR_VERSION 01)
SET(${PROJECT_NAME}_PATCH_VERSION 00)
include(${CMAKE_SOURCE_DIR}/cmake/set_version_numbers.cmake)

set(BUILD_SHARED_LIBS ON CACHE BOOL "skk" FORCE)
set(UA_ENABLE_AMALGAMATION ON CACHE BOOL "" FORCE)
set(UA_ENABLE_GENERATE_NAMESPACE0 ON CACHE BOOL "" FORCE)
set(UA_ENABLE_METHODCALLS ON CACHE BOOL "" FORCE)
set(UA_ENABLE_NODEMANAGEMENT ON CACHE BOOL "" FORCE)
set(UA_ENABLE_SUBSCRIPTIONS ON CACHE BOOL "" FORCE)
set(UA_LOGLEVEL 300 CACHE STRING "" FORCE)
add_subdirectory(open62541)
set_target_properties(open62541 PROPERTIES OUTPUT_NAME ${PROJECT_NAME})
set_target_properties(open62541 PROPERTIES SOVERSION 0 VERSION "${${PROJECT_NAME}_MAJOR_VERSION}.${${PROJECT_NAME}_MINOR_VERSION}.${${PROJECT_NAME}_PATCH_VERSION}")

set(${PROJECT_NAME}_VERSION ${${PROJECT_NAME}_MAJOR_VERSION}.${${PROJECT_NAME}_MINOR_VERSION}.${${PROJECT_NAME}_PATCH_VERSION})

set(${PROJECT_NAME}_SOVERSION ${${PROJECT_NAME}_MAJOR_VERSION}.${${PROJECT_NAME}_MINOR_VERSION})
set(${PROJECT_NAME}_BUILDVERSION $ENV{PROJECT_BUILDVERSION})
if( ${PROJECT_NAME}_BUILDVERSION )
  set(${PROJECT_NAME}_SOVERSION "${${PROJECT_NAME}_SOVERSION}${${PROJECT_NAME}_BUILDVERSION}")
endif( ${PROJECT_NAME}_BUILDVERSION )

#install(FILES ${PROJECT_BINARY_DIR}/open62541/open62541.h DESTINATION include/${PROJECT_NAME})

include(${CMAKE_SOURCE_DIR}/cmake/create_cmake_config_files.cmake)